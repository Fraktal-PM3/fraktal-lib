    {
        "namespace": "default",
        "name": "pm3package",
        "description": "FFI for PM3 PackageContract",
        "version": "1.1",
        "methods": [
            {
                "name": "CreatePackage",
                "pathname": "",
                "description": "Create a package. Transient keys: 'pii' (JSON of PackagePII), 'packageDetails' (JSON of PackageDetails).",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "salt",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": []
            },
            {
                "name": "ReadBlockchainPackage",
                "pathname": "",
                "description": "Read the public blockchain package data by external ID",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            {
                "name": "ReadPackageDetailsAndPII",
                "pathname": "",
                "description": "Read the private package details and PII by external ID. Only the owner org (ownerOrgMSP) can read from its implicit collection.",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            {
                "name": "UpdatePackageStatus",
                "pathname": "",
                "description": "Update status (only owner org may update; setting to 'succeeded' additionally requires attribute role=pm3).",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "status",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "ready_for_pickup",
                                "picked_up",
                                "in_transit",
                                "delivered",
                                "succeeded",
                                "failed",
                                "proposed"
                            ]
                        }
                    }
                ],
                "returns": []
            },
            {
                "name": "DeletePackage",
                "pathname": "",
                "description": "Delete a package (requires role=pm3 anytime, or role=ombud while status is PENDING).",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": []
            },
            {
                "name": "PackageExists",
                "pathname": "",
                "description": "Check if package exists",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ]
            },
            {
                "name": "ProposeTransfer",
                "pathname": "",
                "description": "Propose a transfer of a package to another org. Only current owner can propose. Transient key required: 'privateTransferTerms' (JSON).",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "termsId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "toMSP",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "createdISO",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "expiryISO",
                        "schema": {
                            "type": "string",
                            "nullable": true
                        }
                    }
                ],
                "returns": []
            },
            {
                "name": "CheckPackageDetailsAndPIIHash",
                "pathname": "",
                "description": "Compute and compare the SHA-256 hash of stored (salt, PackageDetails, PII) against expectedHash.",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "expectedHash",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ]
            },
            {
                "name": "ReadTransferTerms",
                "pathname": "",
                "description": "Read public transfer terms by termsId.",
                "params": [
                    {
                        "name": "termsId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            {
                "name": "ReadPrivateTransferTerms",
                "pathname": "",
                "description": "Read private transfer terms by termsId. Only the recipient org (toMSP) may read from its implicit collection.",
                "params": [
                    {
                        "name": "termsId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": [
                    {
                        "name": "",
                        "schema": {
                            "type": "string"
                        }
                    }
                ]
            },
            {
                "name": "AcceptTransfer",
                "pathname": "",
                "description": "Accept a transfer for a package. Only the recipient org (toMSP) may accept. Requires matching 'privateTransferTerms' in transient, and internally verifies packageDetailsAndPIIHash.",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "termsId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": []
            },
            {
                "name": "ExecuteTransfer",
                "pathname": "",
                "description": "Execute the transfer of ownership for a package. Only the current owner org may execute after acceptance by the recipient org.",
                "params": [
                    {
                        "name": "externalId",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "termsId",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "returns": []
            }
        ],
        "events": [
            {
                "name": "CreatePackage",
                "description": "Emitted on package creation",
                "details": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "type": "string"
                        },
                        "status": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "ready_for_pickup",
                                "picked_up",
                                "in_transit",
                                "delivered",
                                "succeeded",
                                "failed",
                                "proposed"
                            ]
                        }
                    }
                }
            },
            {
                "name": "StatusUpdated",
                "description": "Emitted when status changes",
                "details": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "type": "string"
                        },
                        "status": {
                            "type": "string",
                            "enum": [
                                "pending",
                                "ready_for_pickup",
                                "picked_up",
                                "in_transit",
                                "delivered",
                                "succeeded",
                                "failed",
                                "proposed"
                            ]
                        }
                    }
                }
            },
            {
                "name": "DeletePackage",
                "description": "Emitted on delete",
                "details": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "type": "string"
                        }
                    }
                }
            },
            {
                "name": "ProposeTransfer",
                "description": "Emitted when a transfer proposal is created",
                "details": {
                    "type": "object",
                    "properties": {
                        "externalId": {
                            "type": "string"
                        },
                        "termsId": {
                            "type": "string"
                        }
                    }
                }
            },
            {
                "name": "AcceptTransfer",
                "description": "Emitted when a transfer is accepted",
                "details": {
                    "type": "object",
                    "properties": {
                        "externalId": {
                            "type": "string"
                        },
                        "termsId": {
                            "type": "string"
                        }
                    }
                }
            },
            {
                "name": "TransferExecuted",
                "description": "Emitted when a transfer is executed",
                "details": {
                    "type": "object",
                    "properties": {
                        "externalId": {
                            "type": "string"
                        },
                        "termsId": {
                            "type": "string"
                        },
                        "newOwner": {
                            "type": "string"
                        }
                    }
                }
            }
        ]
    }

